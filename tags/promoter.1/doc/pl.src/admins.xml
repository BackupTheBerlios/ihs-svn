<?xml version="1.0" encoding="iso8859-2"?>
<chapter id="admins">
	<title>Podrêcznik administratora</title>

	<para>
	</para>

	<section id="admins.install">
		<title>Instalacja</title>

		<section id="admins.install.download">
			<title>¦ci±ganie</title>

			<para>
				Warto rozpocz±æ od sprawdzenia 
				<ulink url="http://ihs.foo-baz.com">strony projektu</ulink>.
			</para>

			<para>
				<ulink url="http://sourceforge.net/project/showfiles.php?group_id=134802">Udostêpnione pliki</ulink>
				przechowywane s± na serwerze SourceForge. Sprawd¼ czy nie ma
				nowych wersji.
			</para>

			<para>
				Mo¿esz równie¿ ¶ci±gn±æ najnowsz± wersjê wprost z repozytorium
				<ulink url="http://subversion.tigris.org">Subversion</ulink> znajduj±cego siê pod adresem
				<ulink url="http://svn.berlios.de/svnroot/repos/ihs/trunk">
				http://svn.berlios.de/svnroot/repos/ihs/trunk
				</ulink>
			</para>
		</section>

		<section id="admins.install.depends">
			<title>Zale¿no¶ci</title>

			<para>
				G³ówne zale¿no¶ci:
				<itemizedlist>
					<listitem>
						<para>
							Java Runtime co najmniej w wersji 1.4;
						</para>
					</listitem>
					<listitem>
						<para>
							serwer J2EE, na razie system zosta³ przetestowany
							tylko z Tomcat 5;
						</para>
					</listitem>
					<listitem>
						<para>
							Virtual Qmail w wersji co najmniej 11;
						</para>
					</listitem>
					<listitem>
						<para>
							baza danych Oracle lub PostgreSQL (mo¿e byæ inna
							ni¿ ta u¿ywana przez Virtual Qmail);
						</para>
					</listitem>
					<listitem>
						<para>
							nastêpuj±ce biblioteki (zainstalowane na serwerze J2EE): jakarta-commons-logging, 
							jmx, servletapi5, jakarta-commons-beanutils-core, jakarta-taglibs-standard;
						</para>
					</listitem>
				</itemizedlist>
			</para>
		</section>

		<section id="admins.install.compilation">
			<title>Kompilacja, tworzenie pakietów</title>

			<para>
				Proces kompilacji opisany jest w <xref linkend="policies.building"/>.
			</para>
		</section>

		<section id="admins.install.j2ee">
			<title>Instalacja na serwerze J2EE</title>

			<section id="admins.install.j2ee.tomcat">
				<title>Tomcat</title>

				<para>
					Najprostsz± metod± instalacji jest skopiowanie
					pliku WAR do katalogu <filename>webapps</filename>.
					Po restarcie Tomcat powinien rozpakowaæ aplikacjê. Niezbêdna mo¿e
					byæ dodatkowa konfiguracja - ¼ród³a danych oraz mechanizmu autentykacji. 
				</para>

				<para>
					Aby skonfigurowaæ bazê danych oraz autentykacjê nale¿y otworzyæ plik <filename>ihs.xml</filename>.
					Zazwyczaj jest on umieszczany w katalogu z konfiguracj± serwera Tomcat, np. w podkatalogu <filename>Catalina/localhost</filename>.
 					Przyk³adowy plik wygl±da nastêpuj±co:
				</para>
<!--INSERT:../../WebContent/META-INF/context.xml-->
<programlisting><![CDATA[
<Context path="/ihs">
	<Resource name="jdbc/ihsDB" auth="Container"
		type="javax.sql.DataSource"/>
	<ResourceParams name="jdbc/ihsDB">
		<parameter>
			<name>factory</name>
			<value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
		</parameter>
		<parameter>
			<name>driverClassName</name>
			<value>oracle.jdbc.driver.OracleDriver</value>
		</parameter>
		<parameter>
			<name>url</name>
			<value>jdbc:oracle:thin:@127.0.0.1:1521:orcl</value>
		</parameter>
		<parameter>
			<name>username</name>
			<value>ihs</value>
		</parameter>
		<parameter>
			<name>password</name>
			<value>ihs</value>
		</parameter>
		<parameter>
			<name>maxActive</name>
			<value>20</value>
		</parameter>
		<parameter>
			<name>maxIdle</name>
			<value>10</value>
		</parameter>
		<parameter>
			<name>poolPreparedStatements</name>
			<value>true</value>
		</parameter>		
	</ResourceParams>

	<!-- configure login realm -->
	<Realm name="IhsUserRealm" className="org.apache.catalina.realm.JDBCRealm"
		driverName="oracle.jdbc.driver.OracleDriver"
		connectionURL="jdbc:oracle:thin:@127.0.0.1:1521:orcl"
		connectionName="ihs"
		connectionPassword="ihs"
		userTable="ihs_view_administrators" userNameCol="login" userCredCol="password"
		userRoleTable="ihs_view_admins_groups" roleNameCol="group_name"/>

</Context>

]]></programlisting>
				<para>
					Sekcja ResourceParams dotyczy konfiguracji zasobów z jakich aplikacja korzysta, miêdzy innymi
					bazy danych - zasób "jdbc/ihsDB" okre¶la domy¶ln± bazê danych wykorzystywan± przez IHS. Sekcja Realm
					okre¶la ¼ród³o informacji o u¿ytkownikach, domy¶lnie przyjmuje siê, ¿e jest to tabela zarz±dzana przez IHS. Jednak¿e
					istnieje mo¿liwo¶æ korzystania z innego ¼ród³a.
				</para>

				<para>
					Po instalacji nale¿y pamiêtaæ o zabezpieczeniu bazy danych wykorzystywanej przez IHS - nale¿y co najmniej zmieniæ
					domy¶lne has³o. Zalecana jest równie¿ zmiana nazwy u¿ytkownika.
					<note>
						<para>
							Domy¶lnie w przypadku ka¿dej bazy danych u¿ytkownik nazywa siê: ihs i jego has³o brzmi ihs.
						</para>
					</note>
				</para>
				
				<para>
					Nale¿y równie¿ pamiêtaæ o zainstalowaniu odpowiedniego
					sterownika bazy danych. W Tomcat zazwyczaj
					instalowane s± one w katalogu <filename>common/lib</filename>.
				</para>

				<para>
					Szczegó³y dotycz±ce konfiguracji znajduj± siê w konfiguracji
					serwera Tomcat.
				</para>
			</section>

			<section id="admins.install.j2ee.other">
				<title>Inne serwery aplikacji</title>

				<para>
					Aktualnie nie wspierane s± ¿adne inne serwery aplikacji
					oprócz Tomcat. W przysz³ych wersjach planowana jest obs³uga
					innych popularnych serwerów takich jak JBoss, WebSphere i WebLogic.
				</para>
			</section>
		</section>

		<section id="admins.install.db">
			<title>Instalacja bazy danych</title>

			<para>
				Po zainstalowaniu IHS na serwerze aplikacji ostatnim
				krokiem jest skonfigurowanie po³±czenia z baz± danych
				oraz instalacja obiektów w bazie danych.
			</para>

			<para>
				IHS odwo³uje siê do bazy danych za pomoc± 
				zasobu jdbc/ihsDB, który wyszukiwany jest w katalogu JNDI.
			</para>

			<para>
				Konfiguracja JNDI ró¿ni siê miêdzy serwerami. Szczegó³owe
				informacje mo¿na znale¼æ w sekcjach po¶wiêconych konkretnym
				serwerom J2EE, jak i w dokumentacji tych¿e serwerów.
			</para>

			<para>
				Nale¿y pamiêtaæ, ¿e sterowniki JDBC nie s± rozprowadzane
				razem z IHS, nale¿y je zainstalowaæ zgodnie z procedur±
				odpowiedni± dla danego serwera J2EE.
			</para>

			<para>
				Do utworzenia obiektów w bazie danych nale¿y pos³u¿yæ
				siê skryptami <filename>oracle.sql</filename> 
				lub <filename>pgsql.sql</filename>. Aktualnie nie istnieje mo¿liwo¶æ
				aktualizacji istniej±cej bazy danych.
			</para>
		</section>
	</section>

	<section id="admins.conf">
		<title>Konfiguracja</title>
	
		<para>
			Po zainstalowaniu oprogramowania nale¿y uruchomiæ
			przegl±darkê internetow± i otworzyæ g³ówn± stronê systemu,
			jednym z elementów menu bêdzie odno¶nik do strony konfiguracyjnej. 
			Zobacz <xref linkend="users.conf"/>
		</para>
	</section>

</chapter>


