<?xml version="1.0" encoding="iso-8859-2"?>
<chapter id="devs">
	<title>Podrêcznik programisty</title>
	
	<section id="design">
		<title>Rozwa¿ania projektowe</title>

		<section id="design.related">
			<title>Oprogramowanie i sprzêt</title>
			<para>
				Podstaw± IHS bêdzie stanowi³ system operacyjny kompatybilny
				z Uniksem, w tym wypadku domy¶lnie bêdzie to Linux. Docelowo
				wspierane bêd± równie¿ takie systemy jak OpenBSD (rodzina *BSD),
				Solaris. Wykorzystywane bêd± dwie dystrybucje Linuksa - SuSe
				oraz Fedora Core (poniewa¿ s± to jedne z najpopularniejszych
				dystrybucji, czêsto u¿ywane s± na serwerach).
			</para>

			<para>
				IHS opiera³ siê bêdzie o takie elementy jak serwer aplikacji J2EE, 
				MTA, Virtual Qmail. Zak³adana jest 
				mo¿liwo¶æ wymiany ka¿dej z aplikacji odpowiedzialnych
				za poszczególne funkcje - dlatego projekt bêdzie musia³
				byæ modularny, z wymiennymi, kompatybilnymi ze sob±
				czê¶ciami.
			</para>
			
			<para>
				Poniewa¿ jedyn± dostêpn± w czasie realizacji projektu,
				platform± sprzêtow± jest x86 projekt bêdzie realizowany w oparciu o ni±.
				Nie wykluczone jest natomiast u¿ywanie systemu na
				innych architekturach. Poniewa¿ na serwerach coraz
				czê¶ciej wykorzystywane s± procesory IA-64 warto by³oby
				jak najszybciej przygotowywaæ system w wersji na t±
				architekturê.
			</para>
		</section>

		<section id="design.users">
			<title>U¿ytkownicy systemu</title>
			<para>
				Docelowymi grupami u¿ytkowników s±:
			</para>
			<formalpara>
				<title>Normalni u¿ytkownicy</title>
				<para>
					Nie posiadaj±, lub posiadaj±
					znikom± wiedzê na temat funkcjonowania systemu, 
					zainteresoany s± tylko wykorzystaniem
					¶wiadczonych przez system us³ug, wiedza
					informatyczna nie jest od nich wymagana; najmniejsze
					uprawnienia;
				</para>
			</formalpara>
			<formalpara>
				<title>Administratorzy domen</title>
				<para>
					Posiadaj± wiedzê
					na temat opcji oferowanych przez system,
					ich wykorzystywania w zakresie prowadzonej
					przez nich dzia³alno¶ci, zainteresowani
					s± wykorzystywaniem us³ug udostêpnianych przez
					serwer oraz ich podstawow± konfiguracj± (w³±czanie,
					wy³±czanie, itp.), wiedza informatyczna nie jest
					od nich wymagana; uprawnienia poszerzone o zarz±dzanie
					us³ugami zwi±zanymi z zarz±dzan± domen±;
				</para>
			</formalpara>
			<formalpara>
				<title>Administratorzy systemu</title>
				<para>
					Posiadaj± wiedzê
					na temat ¶rodowiska w jakim pracuje
					IHS,  instalacji oraz konfiguracji
					oprogramowania w tym ¶rodowisku, wymagana
					jest podstawowa znajomo¶æ wykorzystywanego
					przez IHS oprogramowania (np. instalacja
					wymaganych programów), znajomo¶æ systemu IHS;
					posiadaj± nieograniczone prawa;
				</para>
			</formalpara>
			<formalpara>
				<title>Programi¶ci</title>
				<para>
					Posiadaj± wiedzê na temat
					funkcji oferowanych przez IHS, 
					architektury systemu, wykorzystywanych
					baz danych, opcji konfiguracyjnych, protoko³ó³
					komunikacyjnych, udostêpnianego API; znajomo¶æ
					informacji takich jak system operacyjny danej
					instalacji, wykorzystywane programy powinny
					byæ dla nich bez znaczenia; nie stanowi± bezpo¶rednich
					u¿ytkowników systemu;
				</para>
			</formalpara>

			<para>
				Ka¿da z grup u¿ytkowników musi byæ dynamicznie
				rozpoznawana. Jedna instalacja IHS musi byæ
				w stanie obs³u¿yæ ka¿dy rodzaj u¿ytkownika, na podstawie
				informacji przekazywanych od niego ustalana jest
				przynale¼no¶æ do danej grupy oraz adaptowane s± 
				udostêpniane funkcje. Powinna istnieæ równie¿ mo¿liwo¶æ
				limitowania dostêpu do danej instalacji tylko do
				u¿ytkowników wybranej grupy.
			</para>
		</section>

		<section id="design.reqs">
			<title>Analiza wymagañ</title>
			
			<section id="design.reqs.soft">
				<title>Wymagania dotycz±ce sprzêtu i oprogramowania</title>
		
				<table frame="all" id="tab.reqs.soft">
					<title>Wymagania dotycz±ce sprzêtu i oprogramowania</title>
					<tgroup cols="3">
						<colspec colwidth="1*"/>
						<colspec colwidth="1*"/>
						<colspec colwidth="8*"/>
						<thead>
							<row>
								<entry>Id.</entry>
								<entry>Priorytet</entry>
								<entry>Wymaganie</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>RS-1</entry>
								<entry>1</entry>
								<entry>Program bêdzie dzia³a³ pod systemami Linux, dystrybucja SuSe >= 9.3 oraz Fedora Core >= 4</entry>
							</row>
							<row>
								<entry>RS-2</entry>
								<entry>2</entry>
								<entry>Program bêdzie dzia³a³ pod systemami OpenBSD >= 3.8, NetBSD >= 3.0</entry>
							</row>
							<row>
								<entry>RS-3</entry>
								<entry>3</entry>
								<entry>Program bêdzie dzia³a³ pod innymi systemami Unix (np. Solaris, HP-UX)</entry>
							</row>
							<row>
								<entry>RS-4</entry>
								<entry>1</entry>
								<entry>Program bêdzie dzia³a³ pod serwerem Tomcat >= 5</entry>
							</row>
							<row>
								<entry>RS-5</entry>
								<entry>2</entry>
								<entry>Program bêdzie dzia³a³ pod serwerem JBoss</entry>
							</row>
							<row>
								<entry>RS-6</entry>
								<entry>3</entry>
								<entry>Program bêdzie dzia³a³ pod serwerami Oracle Application Server, WebLogic, Websphere</entry>
							</row>
							<row>
								<entry>RS-7</entry>
								<entry>1</entry>
								<entry>Mo¿liwe bêdzie wykorzystanie bazy danych Oracle</entry>
							</row>
							<row>
								<entry>RS-8</entry>
								<entry>1</entry>
								<entry>Mo¿liwe bêdzie wykorzystanie bazy danych PostgreSQL</entry>
							</row>
							<row>
								<entry>RS-9</entry>
								<entry>2</entry>
								<entry>Mo¿liwe bêdzie wykorzystanie bazy danych DB2</entry>
							</row>
							<row>
								<entry>RS-10</entry>
								<entry>1</entry>
								<entry>Domy¶ln± platform± jest x86, testy wydajno¶ciowe musz± byæ spe³nione na maszynie P4 >= 3GHz, 512MB >= RAM</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>

			<section id="design.reqs.general">
				<title>Wymagania ogólne</title>
		
				<table frame="all" id="tab.reqs.general">
					<title>Wymagania ogólne</title>
					<tgroup cols="3">
						<colspec colwidth="1*"/>
						<colspec colwidth="1*"/>
						<colspec colwidth="8*"/>
						<thead>
							<row>
								<entry>Id.</entry>
								<entry>Priorytet</entry>
								<entry>Wymaganie</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>RG-1</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ wyboru jêzyka, za pomoc± którego komunikujemy siê z serwisem</entry>
							</row>
							<row>
								<entry>RG-2</entry>
								<entry>1</entry>
								<entry>Zostanie utworzony polski i angielski interfejs u¿ytkownika</entry>
							</row>
							<row>
								<entry>RG-3</entry>
								<entry>1</entry>
								<entry>System umo¿liwia dodanie nowej domeny</entry>
							</row>
							<row>
								<entry>RG-4</entry>
								<entry>1</entry>
								<entry>System umo¿liwia usuniêcie istniej±cej domeny</entry>
							</row>
							<row>
								<entry>RG-5</entry>
								<entry>1</entry>
								<entry>System umo¿liwia dodanie u¿ytkownika do domeny</entry>
							</row>
							<row>
								<entry>RG-6</entry>
								<entry>1</entry>
								<entry>System umo¿liwia zmianê parametrów konta u¿ytkownika</entry>
							</row>
							<row>
								<entry>RG-7</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ usuniêcia konta u¿ytkownika</entry>
							</row>
							<row>
								<entry>RG-8</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ przegl±dania zarejestrowanych domen</entry>
							</row>
							<row>
								<entry>RG-9</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ przegl±dania zarejestrowanych u¿ytkowników</entry>
							</row>
							<row>
								<entry>RG-10</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ przegl±dania logów tworzonych przez Virtual Qmail</entry>
							</row>
							<row>
								<entry>RG-11</entry>
								<entry>2</entry>
								<entry>Istnieje mo¿liwo¶æ definiowania w³asnych raportów opartych o logu Virtual Qmail</entry>
							</row>
							<row>
								<entry>RG-12</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ dodania administratora systemu</entry>
							</row>
							<row>
								<entry>RG-13</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ usuniêcia administratora systemu</entry>
							</row>
							<row>
								<entry>RG-14</entry>
								<entry>1</entry>
								<entry>Istnieje mo¿liwo¶æ zmiany konta administratora systemu</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>
		
			<section id="design.reqs.performance">
				<title>Wymagania dotycz±ce wydajno¶ci</title>
		
				<table frame="all" id="tab.reqs.performance">
					<title>Wymagania dotycz±ce wydajno¶ci</title>
					<tgroup cols="3">
						<colspec colwidth="1*"/>
						<colspec colwidth="1*"/>
						<colspec colwidth="8*"/>
						<thead>
							<row>
								<entry>Id.</entry>
								<entry>Priorytet</entry>
								<entry>Wymaganie</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>RP-1</entry>
								<entry>2</entry>
								<entry>System powinien byæ w stanie odpowiadaæ w czasie mniejszym ni¿ 30 sekund gdy zarejestrowanych jest 1000 domen</entry>
							</row>
							<row>
								<entry>RP-2</entry>
								<entry>2</entry>
								<entry>System powinien byæ w stanie odpowiadaæ w czasie mniejszym ni¿ 30 sekund gdy w domenie zarejestrowanych jest 10000 u¿ytkowników</entry>
							</row>
							<row>
								<entry>RP-3</entry>
								<entry>1</entry>
								<entry>Dodawanie domeny nie mo¿e trwaæ wiêcej ni¿ 30 sekund, niezale¿nie od ilo¶ci zarejestrowanych domen</entry>
							</row>
							<row>
								<entry>RP-4</entry>
								<entry>1</entry>
								<entry>Dodawanie u¿ytkownika nie mo¿e trwaæ wiêcej ni¿ 30 sekund, niezale¿nie od ilo¶ci zarejestrowanych u¿ytkowników</entry>
							</row>
							<row>
								<entry>RP-5</entry>
								<entry>1</entry>
								<entry>Zmiana has³a u¿ytkownika nie mo¿e trwaæ wiêcej ni¿ 15 sekund, niezale¿nie od ilo¶ci zarejestrowanych u¿ytkowników</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>

			<section id="design.reqs.security">
				<title>Wymagania dotycz±ce bezpieczeñstwa</title>
		
				<table frame="all" id="tab.reqs.security">
					<title>Wymagania dotycz±ce bezpieczeñstwa</title>
					<tgroup cols="3">
						<colspec colwidth="1*"/>
						<colspec colwidth="1*"/>
						<colspec colwidth="8*"/>
						<thead>
							<row>
								<entry>Id.</entry>
								<entry>Priorytet</entry>
								<entry>Wymaganie</entry>
							</row>
						</thead>
						<tbody>
							<row>
								<entry>RS-1</entry>
								<entry>2</entry>
								<entry>
									Dostêp do systemu oparty bêdzie o u¿ytkowników i role, 
									przed skorzystaniem z systemu u¿ytkownik bêdzie musia³ potwierdziæ 
									swoj± to¿samo¶æ, system na podstawie konfiguracji okre¶li role nadane danemu u¿ytkownikowi</entry>
							</row>
							<row>
								<entry>RS-2</entry>
								<entry>2</entry>
								<entry>Nowy typ administratora systemu - "zwyk³y", który nie ma mo¿liwo¶ci zmiany danych innych administratorów</entry>
							</row>
							<row>
								<entry>RS-3</entry>
								<entry>2</entry>
								<entry>Nowy typ administratora system - "super", który ma mo¿liwo¶æ zmiany danych innych administratorów, oraz super administratorów</entry>
							</row>
							<row>
								<entry>RS-4</entry>
								<entry>2</entry>
								<entry>Wprowadzenie autoryzacji has³em</entry>
							</row>
						</tbody>
					</tgroup>
				</table>
			</section>


		</section>

		<section id="design.goals">
			<title>Gole i wytyczne</title>

			<para>
				W czasie realizacji projektu nale¿y braæ pod uwagê nastêpuj±ce
				wytyczne.
			</para>

			<formalpara>
				<title>Zasada KISS</title>
				<para>
					Zachowanie zasady KISS (ang. keep it simple stupid!) - 
					architektura, algorytmy, mechanizmy u¿yte w czasie
					implementacji powinny byæ jak najprostrze. Dziêki temu
					powstanie produkt ³atwy w utrzymaniu, rozszerzaniu i
					instalacji.
				</para>
			</formalpara>

			<formalpara>
				<title>Brak przedwczesnej optymalizacji</title>
				<para>
					Optymalizacja
					mo¿e mieæ miejsce tylko i wy³±cznie po stwierdzeniu
					empirycznie faktu i¿ jest ona niezbêdna. Implementacja
					powinna skupiaæ siê na poprawno¶ci dzia³ania i 
					czytelno¶ci kodu, szybko¶æ jest spraw± nieistotn±.
				</para>
			</formalpara>
			
			<formalpara>
				<title>Szybko¶æ zwracania wszystkich wyników vs szybko¶æ zwracania pierwszych</title>
				<para>
					Liczy siê wygl±d i odczuwanie programu - powinna istnieæ
					mo¿liwo¶æ zmiany ca³ego wygl±du aplikacji zgodnie
					z ¿yczeniem klienta. W czasie operacji wykonywanych
					przy udziale u¿ytkownika system musi dzia³aæ szybko 
					- u¿ytkownik nie mo¿e byæ zmuszony do d³u¿szego czekania
					na wyniki. Istotny jest czas otrzymania pierwszych
					wyników.
				</para>
			</formalpara>
		</section>
	</section>

	<section id="strategies">
		<title>Strategia realizacji</title>

		<para>
			Poniewa¿ IHS opiera siê na do¶wiadczeniach zdobytych podczas
			realizacji poprzedniego systemu - NIE-2002 zdecydowano siê
			na ponowne wykorzystanie niektórych elementów. Na ich podstawie
			zbudowany zostanie nowy, znacznie rozszerzony, posiadaj±cy
			wiêksze mo¿liwo¶ci system.
		</para>
	
		<para>
			Podstawowe dane techniczne dotycz±ce poprzedniego systemu:
			<itemizedlist>
				<listitem>
					<para>
						System operacyjny: Linux, dystrybucja Slackware;
					</para>
				</listitem>
				<listitem>
					<para>
						Serwer WWW: Apache 1.3;
					</para>
				</listitem>
				<listitem>
					<para>
						Serwer <glossterm>FTP</glossterm>: ProFTPD;
					</para>
				</listitem>
				<listitem><para><glossterm>MTA</glossterm>: Qmail+Virtual Qmail;</para></listitem>
				<listitem><para>G³ówna baza danych: PostgreSQL;</para></listitem>
				<listitem><para>Bazy danych dostêpne dla u¿ytkowników: MySQL, PostgreSQL;</para></listitem>
			</itemizedlist>
			Program zarz±dzaj±cy systemem napisany zosta³ w wiêkszo¶ci
			w C++, wykorzystano równie¿ PHP, PERL, skrypty pow³oki. 
			Szczegó³owe informacje oraz motywy wyboru przedstawionych programów
			opisane s± w NIE-2002.
		</para>

		<para>
			Zmiany wprowadzone w stosunku do poprzedniej wersji:
			<itemizedlist>
				<listitem>
					<para>
						System operacyjny: Linux, dystrybucja oparta o <glossterm>RPM</glossterm>;
					</para>
				</listitem>
				<listitem>
					<para>
						Serwer WWW: Apache 2.x;
					</para>
				</listitem>
				<listitem>
					<para>
						Serwer J2EE: Sun Application Server;
					</para>
				</listitem>
			</itemizedlist>
		</para>

		<section id="stra.linux">
			<title>Linux, dystrybucja oparta o RPM</title>

			<para>
				Zmiana tego komponentu wynika z do¶wiadczeñ w utrzymaniu
				poprzedniej wersji gdzie wiêkszo¶æ oprogramowania by³a
				kompilowana ze ¼róde³. Takie podej¶cie gwarantuje 
				mo¿liwo¶æ najwiêkszej kontroli nad oprogramowaniem. Istnieje
				np. mo¿liwo¶æ optymalizacji na procesor, wy³±czenia lub
				w³±czenia specyficznych opcji, zmian kodu ¼ród³owego zgodnie
				z potrzebami. Jednocze¶nie takie podej¶cie jest
				najtrudniejsze z utrzymaniu w przypadku du¿ej ilo¶ci
				zale¿nych od siebie pakietów.
			</para>

			<para>
				Trudno jest szybko aktualizowaæ wiêksz± ilo¶æ oprogramowania, 
				poniewa¿ czasami okazuje siê, ¿e ró¿ne wersje
				bibliotek nie s± ze sob± kompatybilne. 
				Niestandardowe rozmieszczenie elementów wymaga
				odpowiedniej konfiguracji instalowanego oprogramowania.
				A przy standardowym rozmieszczeniu trudno zapobiegaæ
				kolizjom, trudno równie¿ odinstalowywaæ starsze wersje
				programów.
			</para>

			<para>
				W przypadku wykorzystania programu RPM ca³a czynno¶æ
				aktualizacji jest zaszyta w pakiecie. Najczê¶ciej
				taki pakiet zawiera specjalne skryptu, które automatycznie
				dokonuj± aktualizacji konfiguracji, sprawdzenia
				poprawno¶ci instalacji. £atwiej kontrolowaæ modyfikacje,
				które zosta³y zrobione po instalacji (dla przyk³adu 
				mo¿liwo¶æ porównywania sum kontrolnych zainstalowanych plików).
				Automatyczne zarz±dzanie wymaganymi zewnêtrznymi bibliotekami -
				pakiet zawiera informacje jakie aplikacje i w jakich wersjach
				mog± byæ u¿yte. Pozwala to w ³atwy sposób aktualizowaæ
				wiêksz± ilo¶æ aplikacji. Jednocze¶nie poprawia siê równie¿
				mo¿liwo¶æ ³atwego usuniêcia oprogramowania.
			</para>

			<para>
				Kolejn± zalet± jest brak konieczno¶ci posiadania zainstalowanego
				na serwerze kompilatora. Poniewa¿ pakiety zawieraj±
				informacje o wymaganych bibliotekach mo¿na je tworzyæ
				w innym systemie ni¿ ten, na którym maj± byæ instalowane. W
				przypadku programów instalowanych ze ¼róde³ aby to
				osi±gn±æ najlepiej mieæ wiern± kopiê ca³ego systemu.
			</para>

			<para>
				Rozwa¿ane dystrybucje to Fedora Core lub SuSe. S± to
				najpopularniejsze dystrybucje, posiadaj± du¿e zaplecze
				u¿ytkowników i wsparcie oferowane przez producenta.
			</para>
		</section>

		<section id="stra.apache">
			<title>Apache 2.x</title>

			<para>
				W poprzednim systemie wykorzystywana by³a wersja 1.3
				serwera. Jest to najstabilniejsza dostepna wersja, jednocze¶nie
				jednak nie jest to wersja aktywnie rozwijana - poprawiane
				s± tylko wa¿ne b³êdy. Natomiast wersja 2.x rozwijana jest
				od d³u¿szego czasu, istnieje ga³±¼ stabilna oznaczona
				numerem 2.0.x, oraz dostêpne s± wersje rozwojowe.
			</para>

			<para>
				W czasie realizacji poprzedniego systemu zdecydowano siê
				na wykorzystanie serwera 1.3 poniewa¿ by³y du¿e problemy
				z integracj± PHP jako modu³u serwera Apache. Poniewa¿ od
				tego czasu poprawiono integracjê tych dwóch aplikacji oraz
				zdecydowano siê wykorzystywaæ wersjê CGI wykorzystana
				zostanie najnowsza stabilna wersje Apche'a.
			</para>
		</section>
	</section> <!--design-->
</chapter>
